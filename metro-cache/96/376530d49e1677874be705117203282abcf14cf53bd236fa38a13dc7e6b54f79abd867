{"dependencies":[{"name":"./isSharedValue.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":51,"index":66}}],"key":"jbgHoPM9eXlUgTWjuCzmYvJw8Xs=","exportNames":["*"]}},{"name":"./PlatformChecker.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":67},"end":{"line":4,"column":46,"index":113}}],"key":"6AA7RQghlqlrd3hVWNoLh/rI420=","exportNames":["*"]}},{"name":"./threads.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":114},"end":{"line":5,"column":39,"index":153}}],"key":"EIyQVLyLcHNu2pjIKQCQrwCtCkA=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,\"__esModule\",{value:!0}),e.startMapper=function(t,p=[],n=[]){const o=c+=1;return(0,s.runOnUI)((function(){const s=function(){let s=g.__mapperRegistry;void 0===s&&(s=g.__mapperRegistry=u()),s.start(o,t,p,n)};return s.__closure={createMapperRegistry:u,mapperID:o,worklet:t,inputs:p,outputs:n},s.__workletHash=6546531365916,s.__initData=f,s})())(),o},e.stopMapper=function(t){(0,s.runOnUI)((function(){const p=function(){const p=g.__mapperRegistry;p?.stop(t)};return p.__closure={mapperID:t},p.__workletHash=2151698497712,p.__initData=l,p})())()};var t=r(d[0]),p=r(d[1]),s=r(d[2]);const n=(0,p.isJest)(),o={code:\"function createMapperRegistry_reactNativeReanimated_mappersJs1(){const{IS_JEST,isSharedValue}=this.__closure;const mappers=new Map();let sortedMappers=[];let runRequested=false;let processingMappers=false;function updateMappersOrder(){const pre=new Map();mappers.forEach(function(mapper){if(mapper.outputs){for(const output of mapper.outputs){const preMappers=pre.get(output);if(preMappers===undefined){pre.set(output,[mapper]);}else{preMappers.push(mapper);}}}});const visited=new Set();const newOrder=[];function dfs(mapper){visited.add(mapper);for(const input of mapper.inputs){const preMappers=pre.get(input);if(preMappers){for(const preMapper of preMappers){if(!visited.has(preMapper)){dfs(preMapper);}}}}newOrder.push(mapper);}mappers.forEach(function(mapper){if(!visited.has(mapper)){dfs(mapper);}});sortedMappers=newOrder;}function mapperRun(){runRequested=false;if(processingMappers){return;}try{processingMappers=true;if(mappers.size!==sortedMappers.length){updateMappersOrder();}for(const mapper of sortedMappers){if(mapper.dirty){mapper.dirty=false;mapper.worklet();}}}finally{processingMappers=false;}}function maybeRequestUpdates(){if(IS_JEST){mapperRun();}else if(!runRequested){if(processingMappers){requestAnimationFrame(mapperRun);}else{queueMicrotask(mapperRun);}runRequested=true;}}function extractInputs(inputs,resultArray){if(Array.isArray(inputs)){for(const input of inputs){input&&extractInputs(input,resultArray);}}else if(isSharedValue(inputs)){resultArray.push(inputs);}else if(Object.getPrototypeOf(inputs)===Object.prototype){for(const element of Object.values(inputs)){element&&extractInputs(element,resultArray);}}return resultArray;}return{start:function(mapperID,worklet,inputs,outputs){const mapper={id:mapperID,dirty:true,worklet:worklet,inputs:extractInputs(inputs,[]),outputs:outputs};mappers.set(mapper.id,mapper);sortedMappers=[];for(const sv of mapper.inputs){sv.addListener(mapper.id,function(){mapper.dirty=true;maybeRequestUpdates();});}maybeRequestUpdates();},stop:function(mapperID){const mapper=mappers.get(mapperID);if(mapper){mappers.delete(mapper.id);sortedMappers=[];for(const sv of mapper.inputs){sv.removeListener(mapper.id);}}}};}\"},u=(function(){const p=function(){const p=new Map;let s=[],o=!1,u=!1;function c(){const t=new Map;p.forEach(p=>{if(p.outputs)for(const s of p.outputs){const n=t.get(s);void 0===n?t.set(s,[p]):n.push(p)}});const n=new Set,o=[];function u(p){n.add(p);for(const s of p.inputs){const p=t.get(s);if(p)for(const t of p)n.has(t)||u(t)}o.push(p)}p.forEach(t=>{n.has(t)||u(t)}),s=o}function f(){if(o=!1,!u)try{u=!0,p.size!==s.length&&c();for(const t of s)t.dirty&&(t.dirty=!1,t.worklet())}finally{u=!1}}function l(){n?f():o||(u?requestAnimationFrame(f):queueMicrotask(f),o=!0)}function y(p,s){if(Array.isArray(p))for(const t of p)t&&y(t,s);else if((0,t.isSharedValue)(p))s.push(p);else if(Object.getPrototypeOf(p)===Object.prototype)for(const t of Object.values(p))t&&y(t,s);return s}return{start:(t,n,o,u)=>{const c={id:t,dirty:!0,worklet:n,inputs:y(o,[]),outputs:u};p.set(c.id,c),s=[];for(const t of c.inputs)t.addListener(c.id,()=>{c.dirty=!0,l()});l()},stop:t=>{const n=p.get(t);if(n){p.delete(n.id),s=[];for(const t of n.inputs)t.removeListener(n.id)}}}};return p.__closure={IS_JEST:n,isSharedValue:t.isSharedValue},p.__workletHash=1831615820738,p.__initData=o,p})();let c=9999;const f={code:\"function reactNativeReanimated_mappersJs2(){const{createMapperRegistry,mapperID,worklet,inputs,outputs}=this.__closure;let mapperRegistry=global.__mapperRegistry;if(mapperRegistry===undefined){mapperRegistry=global.__mapperRegistry=createMapperRegistry();}mapperRegistry.start(mapperID,worklet,inputs,outputs);}\"};const l={code:\"function reactNativeReanimated_mappersJs3(){const{mapperID}=this.__closure;const mapperRegistry=global.__mapperRegistry;mapperRegistry===null||mapperRegistry===void 0||mapperRegistry.stop(mapperID);}\"}});","lineCount":1,"map":[[1,28,1,0],[1,41,1,13,"Object"],[1,48,1,13,"defineProperty"],[1,63,1,13,"e"],[1,65,1,13],[1,79,1,13,"value"],[1,86,1,13],[1,90,1,13,"e"],[1,92,1,13,"startMapper"],[1,104,169,7],[1,113,169,28,"worklet"],[1,115,169,37,"inputs"],[1,117,169,46],[1,120,169,50,"outputs"],[1,122,169,60],[1,126,170,2],[1,132,170,8,"mapperID"],[1,134,170,19,"MAPPER_ID"],[1,137,170,32],[1,139,178,2],[1,146,171,2],[1,148,171,2,"runOnUI"],[1,160,171,10],[1,177,171,10,"reactNativeReanimated_mappersJs2"],[1,179,171,10],[1,190,172,4],[1,194,172,8,"mapperRegistry"],[1,196,172,25,"global"],[1,198,172,32,"__mapperRegistry"],[1,220,173,27,"undefined"],[1,224,173,8,"mapperRegistry"],[1,228,174,6,"mapperRegistry"],[1,230,174,23,"global"],[1,232,174,30,"__mapperRegistry"],[1,249,174,49,"createMapperRegistry"],[1,254,176,4,"mapperRegistry"],[1,256,176,19,"start"],[1,262,176,25,"mapperID"],[1,264,176,35,"worklet"],[1,266,176,44,"inputs"],[1,268,176,52,"outputs"],[1,270,177,2],[1,272,177,3],[1,279,177,3,"reactNativeReanimated_mappersJs2"],[1,281,177,3,"__closure"],[1,291,177,3],[1,292,177,3,"createMapperRegistry"],[1,315,177,3,"mapperID"],[1,326,177,3,"worklet"],[1,336,177,3,"inputs"],[1,345,177,3,"outputs"],[1,356,177,3,"reactNativeReanimated_mappersJs2"],[1,358,177,3,"__workletHash"],[1,372,177,3],[1,386,177,3,"reactNativeReanimated_mappersJs2"],[1,388,177,3,"__initData"],[1,399,177,3,"_worklet_6546531365916_init_data"],[1,401,177,3,"reactNativeReanimated_mappersJs2"],[1,402,177,3],[1,404,171,10],[1,407,171,2],[1,410,178,9,"mapperID"],[1,411,179,0],[1,413,1,13,"e"],[1,415,1,13,"stopMapper"],[1,426,180,7],[1,435,180,27,"mapperID"],[1,439,181,2],[1,441,181,2,"runOnUI"],[1,453,181,10],[1,470,181,10,"reactNativeReanimated_mappersJs3"],[1,472,181,10],[1,483,182,4],[1,489,182,10,"mapperRegistry"],[1,491,182,27,"global"],[1,493,182,34,"__mapperRegistry"],[1,510,183,4,"mapperRegistry"],[1,513,183,20,"stop"],[1,518,183,25,"mapperID"],[1,520,184,2],[1,522,184,3],[1,529,184,3,"reactNativeReanimated_mappersJs3"],[1,531,184,3,"__closure"],[1,541,184,3],[1,542,184,3,"mapperID"],[1,554,184,3,"reactNativeReanimated_mappersJs3"],[1,556,184,3,"__workletHash"],[1,570,184,3],[1,584,184,3,"reactNativeReanimated_mappersJs3"],[1,586,184,3,"__initData"],[1,597,184,3,"_worklet_2151698497712_init_data"],[1,599,184,3,"reactNativeReanimated_mappersJs3"],[1,600,184,3],[1,602,181,10],[1,605,181,2],[1,607,185,0],[1,609,3,0],[1,613,3,0,"_isSharedValue"],[1,615,3,0,"r"],[1,617,3,0,"d"],[1,619,3,0],[1,623,4,0,"_PlatformChecker"],[1,625,4,0,"r"],[1,627,4,0,"d"],[1,629,4,0],[1,633,5,0,"_threads"],[1,635,5,0,"r"],[1,637,5,0,"d"],[1,639,5,0],[1,643,6,0],[1,649,6,6,"IS_JEST"],[1,652,6,16],[1,654,6,16,"isJest"],[1,666,6,25,"_worklet_1831615820738_init_data"],[1,668,6,25],[1,669,6,25,"code"],[1,674,6,25],[1,2861,6,25,"createMapperRegistry"],[1,2864,7,0],[1,2881,7,0,"createMapperRegistry"],[1,2883,7,0],[1,2894,10,2],[1,2900,10,8,"mappers"],[1,2902,10,18],[1,2906,10,22,"Map"],[1,2910,11,2],[1,2914,11,6,"sortedMappers"],[1,2916,11,22],[1,2919,12,6,"runRequested"],[1,2922,12,21],[1,2924,13,6,"processingMappers"],[1,2927,13,26],[1,2929,14,2],[1,2938,14,11,"updateMappersOrder"],[1,2942,35,4],[1,2948,35,10,"pre"],[1,2950,35,16],[1,2954,35,20,"Map"],[1,2958,36,4,"mappers"],[1,2960,36,12,"forEach"],[1,2968,36,20,"mapper"],[1,2972,37,6],[1,2975,37,10,"mapper"],[1,2977,37,17,"outputs"],[1,2985,38,8],[1,2989,38,13],[1,2995,38,19,"output"],[1,3000,38,29,"mapper"],[1,3002,38,36,"outputs"],[1,3010,38,45],[1,3011,39,10],[1,3017,39,16,"preMappers"],[1,3019,39,29,"pre"],[1,3021,39,33,"get"],[1,3025,39,37,"output"],[1,3033,40,29,"undefined"],[1,3037,40,14,"preMappers"],[1,3039,41,12,"pre"],[1,3041,41,16,"set"],[1,3045,41,20,"output"],[1,3047,41,28],[1,3048,41,29,"mapper"],[1,3052,43,12,"preMappers"],[1,3054,43,23,"push"],[1,3059,43,28,"mapper"],[1,3061,45,8],[1,3065,48,4],[1,3071,48,10,"visited"],[1,3073,48,20],[1,3077,48,24,"Set"],[1,3081,49,10,"newOrder"],[1,3083,49,21],[1,3086,50,4],[1,3095,50,13,"dfs"],[1,3097,50,17,"mapper"],[1,3100,51,6,"visited"],[1,3102,51,14,"add"],[1,3106,51,18,"mapper"],[1,3109,52,6],[1,3113,52,11],[1,3119,52,17,"input"],[1,3124,52,26,"mapper"],[1,3126,52,33,"inputs"],[1,3133,52,41],[1,3134,53,8],[1,3140,53,14,"preMappers"],[1,3142,53,27,"pre"],[1,3144,53,31,"get"],[1,3148,53,35,"input"],[1,3151,54,8],[1,3154,54,12,"preMappers"],[1,3156,55,10],[1,3160,55,15],[1,3166,55,21,"preMapper"],[1,3171,55,34,"preMappers"],[1,3173,56,17,"visited"],[1,3175,56,25,"has"],[1,3179,56,29,"preMapper"],[1,3183,57,14,"dfs"],[1,3185,57,18,"preMapper"],[1,3187,61,6],[1,3188,62,6,"newOrder"],[1,3190,62,15,"push"],[1,3195,62,20,"mapper"],[1,3197,63,4],[1,3198,64,4,"mappers"],[1,3200,64,12,"forEach"],[1,3208,64,20,"mapper"],[1,3212,65,11,"visited"],[1,3214,65,19,"has"],[1,3218,65,23,"mapper"],[1,3222,66,8,"dfs"],[1,3224,66,12,"mapper"],[1,3229,69,4,"sortedMappers"],[1,3231,69,20,"newOrder"],[1,3232,70,2],[1,3233,71,2],[1,3242,71,11,"mapperRun"],[1,3246,73,4],[1,3249,72,4,"runRequested"],[1,3252,72,19],[1,3255,73,8,"processingMappers"],[1,3257,76,4],[1,3261,77,6,"processingMappers"],[1,3264,77,26],[1,3266,78,10,"mappers"],[1,3268,78,18,"size"],[1,3275,78,27,"sortedMappers"],[1,3277,78,41,"length"],[1,3285,79,8,"updateMappersOrder"],[1,3289,81,6],[1,3293,81,11],[1,3299,81,17,"mapper"],[1,3304,81,27,"sortedMappers"],[1,3306,82,12,"mapper"],[1,3308,82,19,"dirty"],[1,3316,83,10,"mapper"],[1,3318,83,17,"dirty"],[1,3325,83,25],[1,3327,84,10,"mapper"],[1,3329,84,17,"worklet"],[1,3339,87,4],[1,3340,87,5],[1,3348,88,6,"processingMappers"],[1,3351,88,26],[1,3352,89,4],[1,3353,90,2],[1,3354,91,2],[1,3363,91,11,"maybeRequestUpdates"],[1,3367,92,8,"IS_JEST"],[1,3369,99,6,"mapperRun"],[1,3373,100,16,"runRequested"],[1,3377,101,10,"processingMappers"],[1,3379,113,8,"requestAnimationFrame"],[1,3401,113,30,"mapperRun"],[1,3404,115,8,"queueMicrotask"],[1,3419,115,23,"mapperRun"],[1,3422,117,6,"runRequested"],[1,3425,117,21],[1,3427,119,2],[1,3428,120,2],[1,3437,120,11,"extractInputs"],[1,3439,120,25,"inputs"],[1,3441,120,33,"resultArray"],[1,3444,121,4],[1,3447,121,8,"Array"],[1,3453,121,14,"isArray"],[1,3461,121,22,"inputs"],[1,3464,122,6],[1,3468,122,11],[1,3474,122,17,"input"],[1,3479,122,26,"inputs"],[1,3481,123,8,"input"],[1,3484,123,17,"extractInputs"],[1,3486,123,31,"input"],[1,3488,123,38,"resultArray"],[1,3496,125,11],[1,3500,125,15],[1,3502,125,15,"isSharedValue"],[1,3519,125,29,"inputs"],[1,3522,126,6,"resultArray"],[1,3524,126,18,"push"],[1,3529,126,23,"inputs"],[1,3537,127,11],[1,3540,127,15,"Object"],[1,3547,127,22,"getPrototypeOf"],[1,3562,127,37,"inputs"],[1,3567,127,49,"Object"],[1,3574,127,56,"prototype"],[1,3584,131,6],[1,3588,131,11],[1,3594,131,17,"element"],[1,3599,131,28,"Object"],[1,3606,131,35,"values"],[1,3613,131,42,"inputs"],[1,3616,132,8,"element"],[1,3619,132,19,"extractInputs"],[1,3621,132,33,"element"],[1,3623,132,42,"resultArray"],[1,3626,135,4],[1,3633,135,11,"resultArray"],[1,3634,136,2],[1,3635,137,2],[1,3641,137,9],[1,3642,138,4,"start"],[1,3648,138,11,"start"],[1,3649,138,12,"mapperID"],[1,3651,138,22,"worklet"],[1,3653,138,31,"inputs"],[1,3655,138,39,"outputs"],[1,3660,139,6],[1,3666,139,12,"mapper"],[1,3668,139,21],[1,3669,140,8,"id"],[1,3672,140,12,"mapperID"],[1,3674,141,8,"dirty"],[1,3681,141,15],[1,3683,142,8,"worklet"],[1,3693,143,8,"inputs"],[1,3700,143,16,"extractInputs"],[1,3702,143,30,"inputs"],[1,3704,143,38],[1,3708,144,8,"outputs"],[1,3719,146,6,"mappers"],[1,3721,146,14,"set"],[1,3725,146,18,"mapper"],[1,3727,146,25,"id"],[1,3730,146,29,"mapper"],[1,3733,147,6,"sortedMappers"],[1,3735,147,22],[1,3738,148,6],[1,3742,148,11],[1,3748,148,17,"sv"],[1,3753,148,23,"mapper"],[1,3755,148,30,"inputs"],[1,3762,149,8,"sv"],[1,3764,149,11,"addListener"],[1,3776,149,23,"mapper"],[1,3778,149,30,"id"],[1,3781,149,34],[1,3786,150,10,"mapper"],[1,3788,150,17,"dirty"],[1,3795,150,25],[1,3797,151,10,"maybeRequestUpdates"],[1,3803,154,6,"maybeRequestUpdates"],[1,3808,156,4,"stop"],[1,3813,156,10,"mapperID"],[1,3817,157,6],[1,3823,157,12,"mapper"],[1,3825,157,21,"mappers"],[1,3827,157,29,"get"],[1,3831,157,33,"mapperID"],[1,3834,158,6],[1,3837,158,10,"mapper"],[1,3839,158,18],[1,3840,159,8,"mappers"],[1,3842,159,16,"delete"],[1,3849,159,23,"mapper"],[1,3851,159,30,"id"],[1,3855,160,8,"sortedMappers"],[1,3857,160,24],[1,3860,161,8],[1,3864,161,13],[1,3870,161,19,"sv"],[1,3875,161,25,"mapper"],[1,3877,161,32,"inputs"],[1,3884,162,10,"sv"],[1,3886,162,13,"removeListener"],[1,3901,162,28,"mapper"],[1,3903,162,35,"id"],[1,3906,164,6],[1,3909,167,0],[1,3911,125,28],[1,3918,167,1,"createMapperRegistry"],[1,3920,167,1,"__closure"],[1,3930,167,1],[1,3931,167,1,"IS_JEST"],[1,3941,167,1,"isSharedValue"],[1,3955,125,15,"isSharedValue"],[1,3972,125,28,"createMapperRegistry"],[1,3974,125,28,"__workletHash"],[1,3988,125,28],[1,4002,125,28,"createMapperRegistry"],[1,4004,125,28,"__initData"],[1,4015,125,28,"_worklet_1831615820738_init_data"],[1,4017,125,28,"createMapperRegistry"],[1,4018,125,28],[1,4020,7,0],[1,4023,168,0],[1,4027,168,4,"MAPPER_ID"],[1,4029,168,16],[1,4034,168,21],[1,4040,168,21,"_worklet_6546531365916_init_data"],[1,4042,168,21],[1,4043,168,21,"code"],[1,4048,168,21],[1,4363,179,1],[1,4369,179,1,"_worklet_2151698497712_init_data"],[1,4371,179,1],[1,4372,179,1,"code"],[1,4377,179,1],[1,4579,185,1],[1,4582]],"functionMap":{"names":["<global>","createMapperRegistry","updateMappersOrder","forEach$argument_0","dfs","mapperRun","maybeRequestUpdates","extractInputs","start","sv.addListener$argument_1","stop","startMapper","runOnUI$argument_0","stopMapper"],"mappings":"AAA;ACM;ECO;oBCsB;KDW;IEG;KFa;oBCC;KDI;GDE;EIC;GJmB;EKC;GL4B;EMC;GNgB;WOE;kCCW;SDG;KPG;USC;KTS;CDE;OWE;UCE;GDM;CXE;OaC;UDC;GCG;CbC"}},"type":"js/module"}]}